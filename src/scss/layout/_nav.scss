// The MIT License (MIT)
// 
// Copyright (c) 2015 Cyril Schumacher.fr
// 
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
// 
// The above copyright notice and this permission notice shall be included in all
// copies or substantial portions of the Software.
// 
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
// SOFTWARE.

/* Animation */

@include keyframes(navbar-closing) {
    from { right: 0 }
    to { right: -30% }
}
@include keyframes(navbar-opening) {
    from { right: -30% }
    to { right: 0 }
}
@include keyframes(navbar-item-opening) {
    from { right: -100% }
    to { right: 0 }
}
@include keyframes(navbar-item-closing) {
    from { right: 0 }
    to { right: -100% }
}

/* Stack order elements */

.l-nav, #drawer-toggle-label { z-index: 3 }

/* Classes */

.l-nav {
    @include animation(500ms navbar-closing forwards cubic-bezier(0.165, 0.840, 0.440, 1.000));
    background: $dark-primary-color;
	height: 100%;
	position: fixed;
    right: -30%;
	top: 0;
	width: 30%;
    
    &__content {
        height: 100%;
        width: 100%;
        
        &__item {
            display: inline-block;
            opacity: .2;
            text-transform: uppercase;
            @include transition($timing-fast background, opacity);
            width: 100%;

            &:hover, &:focus { background: $dark-secondary-color; opacity: 1 }
            
            &__icon {
                display: inline-block;
                margin: 0 1rem 0 0; 
                vertical-align: middle;

                i {
                    border: ($base-border / 3) solid #fff;
                    @include rem2px(height, 3);
                    @include rem2px(width, 3);
                }
            }
        }
    }
    
    h2, a { color: #fff; @include rem2px(padding, ($base-margin_ * 2)) }
    
    ul {
        width: inherit;
        
        li {
            @include animation(navbar-item-closing 500ms forwards ease-out);
            position: relative;
            width: inherit;
        }
    }
}

/* Id's */

#drawer-toggle {
    display: none;
    
    &:checked ~ #drawer-toggle-label {
        height: 100%;
        left: 0;
        opacity: 0;
        position: fixed;
        top: 0;
        width: 100%;
    }

    &:checked ~ .l-nav {
        @include animation(100ms navbar-opening forwards cubic-bezier(0.215, 0.610, 0.355, 1.000));
        right: 0;

        ul {
            @include animation-delay-child(5, 75ms, 'li');
            li { @include animation(navbar-item-opening 250ms forwards ease-out); right: -100% }
        }
    }
    
    &-label {
        background: rgba(255, 255, 255, 0);
        display: block;
        height: 4rem;
        left: 10%;
        right: 10%;
        position: absolute;
        top: 5rem;
        width: 80%;

        &:before {
            background: #fff;
            @include box-shadow(0 8px 0 #fff, 0 16px 0 #fff);
            content: '';
            display: block;
            height: 3px;
            position: absolute;
            right: 0;
            top: 0;
            @include transition($timing-fast transform);
            width: 24px;
        }
    }
}